<html>
<head>
	<title>API Reference</title>
	<link rel="stylesheet" type="text/css" href="styles.css" />
	<style>
		a:link, a:visited
		{ 
			text-decoration: none;
			border-bottom: 1px solid #d9e7d9;
		}
		
		a:hover
		{
			border-bottom: 1px solid black;
		}
		
		.h
		{
			font-weight: bold;
			padding-left: 50px;
			color: #C800A4;
			padding-bottom: 0.2em;
		}
		
		.d
		{
			padding-left: 75px;
			padding-bottom: 1em;
		}
	</style>
</head>
<body>

<div class="page">

<h1>API Reference</h1>
Version 0.00.00
<br>
Preliminary Draft.
<br>
Subject to change without notice.
<br>
<br>

<h2>Introduction</h2>
RNotebook is designed as a scripting platform offering a set of useful tools, available in the form Java objects.
This document describes application programming interface for these tools.
<br>
The tools are grouped in the following categories:
<br>
<ul>
	<li><a href='#BuiltIn'>Built-in Objects</a>
	<li><a href='#FS'>FS - File system</a>
	<li><a href='#IO'>IO - Input/Output subsystem</a>
	<li><a href='#NB'>NB - Notebook functions</a>
	<li><a href='#NET'>NET - Network access functions</a>
	<li><a href='#OS'>OS - Operating system functions</a>
	<li><a href='#UT'>UT - Utility functions</a>
</ul>
In addition, full set of Java runtime classes are available for scripts via Mozilla Rhino Java bindings.  
<br>
<br>
<br>





<a name='BuiltIn'></a>
<h2>Built-in Objects</h2>
The benefit of RNotebook is intended to come from a set of tools and utility classes that simplify writing scripts for common tasks.  
These classes are:
<ul>
	<li><a href='#DTable'>DTable</a>
	<li><a href='#DTableReader'>DTableReader</a>
	<li><a href='#JImage'>JImage</a>
</ul>
<br>


<a name='DTable'></a>
<h2>DTable</h2>
DTable provides storage for columnar data.
<br>
<br>

<div class=h>addColumn(name)</div>
<div class=d>Add a named column.</div>

<div class=h>addRow([val], ...)</div>
<div class=d>Adds row of values.  The table creates additional columns when necessary.</div>

<div class=h>copy()</div>
<div class=d>Creates a new copy of the table.</div>

<div class=h>getColumnCount()<br>columnCount</div>
<div class=d>Returns the number of columns.</div>

<div class=h>getColumnName(columnIndex)</div>
<div class=d>Returns the name of the specified column.</div>

<div class=h>getDataRow(row)</div>
<div class=d>Returns the specified data row in the form of an Object[].</div>

<div class=h>getRowCount()<br>rowCount</div>
<div class=d>Returns the number of rows in the table.</div>

<div class=h>getValue(row, column)</div>
<div class=d>Returns the value stored in the specified row and column.</div>

<div class=h>setColumns(columns)</div>
<div class=d>Sets all column names in one operation.  Expects a String[].</div>

<div class=h>setValue(row, column)</div>
<div class=d>Store a value in the specified row and column.  Additional empty rows or columns are created when necessary.  Keep in mind that a limited set of data objects can be persisted [TODO:explain which] in a notebook file.</div>



<a name='DTableReader'></a>
<h2>DTableReader</h2>
DTableReader should be used to import CSV or TSV file, where custom parsing of numeric and date/time values is required.
<br>
<br>

<div class=h>readFile(file)</div>
<div class=d>Reads and parses the file.  Returns an instance of DTable.</div>

<div class=h>setColumnName(column, name)</div>
<div class=d>Sets the name of the specified column.  This method should not be called together with setFirstRowContainsColumnNames().</div>

<div class=h>setColumnType(column, type)</div>
<div class=d>Sets the column type for the column.  Valid types are: 'string', 'date', 'time', 'date_time', 'float', 'double', 'int', 'long'.</div>

<div class=h>setDateFormat(format)</div>
<div class=d>Sets the date format (using SimpleDateFormat pattern notation).</div>

<div class=h>setDateTimeFormat(format)</div>
<div class=d>Sets the date_time format (using SimpleDateFormat pattern notation).</div>

<div class=h>setDecimalSeparator(sep)</div>
<div class=d>Sets decimal separator character to be used for parsing numeric types.  Accepted values are '.' and ','.  When parsing, only the decimal separator is used, all other symbols will be silently ignored.</div>

<div class=h>setEncoding(encoding)</div>
<div class=d>Sets the file encoding, using Java Charset patterns.</div>

<div class=h>setFirstRowContainsColumnNames(bool)</div>
<div class=d>Informs the reader whether to expect column names in the first row.</div>

<div class=h>setLenient(bool)</div>
<div class=d>When set, cells with parsing errors will be set to the string value read from the file.</div>

<div class=h>setTimeFormat(format)</div>
<div class=d>Sets the time format (using SimpleDateFormat pattern notation).</div>




<a name='JImage'></a>
<h2>JImage</h2>
JImage instance contains a BufferedImage along with a number of methods designed to simplify programmatic creation of images and icons.
<br>
<br>

<div class=h>copy()</div>
<div class=d>Creates a copy of the image.</div>

<div class=h>fillRect(x, y, width, height)</div>
<div class=d>Fills the specified rectangle with the color previously set by setColor().</div>

<div class=h>getBufferedImage()<br>bufferedImage</div>
<div class=d>Returns a copy of underlying BufferedImage.</div>

<div class=h>getHeight()<br>height</div>
<div class=d>Returns the image height in pixels.</div>

<div class=h>getWidth()<br>width</div>
<div class=d>Returns the image width in pixels.</div>

<div class=h>invert()<br>width</div>
<div class=d>Inverts image RGB channels.</div>

<div class=h>scale(factor)<br>width</div>
<div class=d>Resizes the image.</div>

<div class=h>setColor(name)<br>setColor(red, green, blue)<br>setColor(red, green, blue, alpha)<br></div>
<div class=d>Sets current color.  Accepted color names are either #RGB, #RRGGBB, or valid SVG names.</div>



<a name='FS'></a>
<h2>FS - File System</h2>
There are two ways of accessing the filesystem in RNotebook: using standard java.io.File class or via 
a set of methods provided by the top-level FS object.
<br>
<br>

<div class=h>FS.exists(file)</div>
<div class=d>Tests whether the file exists.</div>

<div class=h>
	FS.freeSpace<br>
	FS.getFreeSpace(path)
</div>
<div class=d>
	Returns the amount of free space on a disk represented by the path.
</div>

<div class=h>FS.isDirectory(path)</div>
<div class=d>Tests whether the file denoted by this path is a directory.</div>

<div class=h>FS.isFile(path)</div>
<div class=d>Tests whether the file denoted by this path is a normal file.</div>

<div class=h>FS.isHidden(path)</div>
<div class=d>Tests whether the file denoted by this path is a hidden file</div>

<div class=h>FS.lastModified(file)</div>
<div class=d>Returns the file timestamp in milliseconds.</div>

<div class=h>FS.ls([path],...)</div>
<div class=d>Lists files.</div>

<div class=h>FS.pwd()</div>
<div class=d>Returns the current directory.</div>

<div class=h>FS.tempFile(prefix, suffix)</div>
<div class=d>Creates a temporary file.</div>

<div class=h>FS.totalSpace, getTotalSpace(path)</div>
<div class=d>Returns the amount of total space.</div>

<div class=h>FS.touch(file)</div>
<div class=d>Updates the timestamp of a file, creating it if necessary</div>

   
   

<a name='IO'></a>
<h2>IO - Input/Output Subsystem</h2>
<br>


<div class=h>IO.loadImage(file)</div>
<div class=d>Loads image file.  This method returns an instance of JImage class.</div>

<div class=h>IO.loadTable(file)</div>
<div class=d>
	Loads table from CSV, XLS, or XLSX file.  This method should be used to deal with simple tables.
	<br>
	In situations where custom dates, numbers, or encodings are involved it is better to configure a custom table reader obtained with IO.newTableReader().
</div>

<div class=h>IO.newTableReader()</div>
<div class=d>Creates a table reader, an instance of DTableReader class.</div>

<div class=h>IO.write(text, file)</div>
<div class=d>Writes text to a file in UTF-8 encoding.</div>



<a name='NB'></a>
<h2>NB - Notebook Functions</h2>
<br>

<div class=h>NB.display(x)</div>
<div class=d>Displays an object in the code output section of the notebook.  The notebook renders images and tables as such, all other types as text according to their toString() representation.</div>

<div class=h>NB.getValue(key)</div>
<div class=d>Returns a value from the internal data storage.  (To be implemented).</div>

<div class=h>NB.setValue(key, value)</div>
<div class=d>Stores a value in the internal data storage.  (To be implemented).</div>



<a name='NET'></a>
<h2>NET - Network Access Functions</h2>
<br>

<div class=h>NET.email(address, subject, text)</div>
<div class=d>Sends a simple email.  For other cases, please use NET.newMailMessage() method.  (To be implemented).</div>

<div class=h>NET.get(url)</div>
<div class=d>Returns content specified by the URL.  The exact type of the object returned depends on the content-type of the response.  A java.lang.String or JSImage can ne returned.</div>

<div class=h>NET.inBrowser(url)</div>
<div class=d>Opens a link in a browser.  The result may depend on whether an underlying OS is configured to open a link in a browser.</div>

<div class=h>NET.newMailMessage()</div>
<div class=d>Creates an instance of email message.  (To be implemented).</div>

<div class=h>NET.post(url, data)</div>
<div class=d>Uploads an object to the URL via HTTP POST request.  (To be implemented).</div>




<a name='OS'></a>
<h2>OS - Operating System Functions</h2>
<br>

<div class=h>OS.arch</div>
<div class=d>Returns the OS architecture.</div>

<div class=h>OS.cpuCount</div>
<div class=d>Returns number of available processor cores.</div>

<div class=h>OS.freeMem</div>
<div class=d>Returns the amount of free memory in the JVM.</div>

<div class=h>OS.hostName</div>
<div class=d>Returns the host name.</div>

<div class=h>OS.maxMem</div>
<div class=d>Returns the maximum amount of memory that the JVM will attempt to use.</div>

<div class=h>OS.name</div>
<div class=d>Returns the OS name.</div>

<div class=h>OS.time</div>
<div class=d>Returns the current time in milliseconds.</div>

<div class=h>OS.totalMem</div>
<div class=d>Returns the total amount of memory in the JVM.</div>

<div class=h>OS.usedMem</div>
<div class=d>Returns the amount of memory currently being used.</div>

<div class=h>OS.userName</div>
<div class=d>Returns the user name.</div>

<div class=h>OS.version</div>
<div class=d>Returns the OS version.</div>



<a name='UT'></a>
<h2>UT - Utility Functions</h2>
<br>

<div class=h>UT.hslColor(hue,saturation,luminocity)</div>
<div class=d>Create color with the specified HSL values.</div>

<div class=h>UT.parse(html)</div>
<div class=d>Parses HTML document.  Returns Jsoup Document instance.</div>

<div class=h>UT.sleep(ms)</div>
<div class=d>Sleeps for the specified number of milliseconds.</div>

</div>

<div class="footer">copyright &copy; 2015 andy goryachev</div>

</body>
</html>
